<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hata Ayƒ±klama - Ayƒ±kla Pirincin Ta≈üƒ±nƒ± - Seviye 1</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel (Tarayƒ±cƒ±da JSX derlemek i√ßin) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Tailwind'in scrollbar-hide sƒ±nƒ±fƒ± i√ßin √∂zel CSS */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        // React Hook'larƒ±nƒ± dƒ±≈üarƒ± aktarƒ±yoruz
        const { useState, useMemo } = React;

        // Lucide ƒ∞konlarƒ±nƒ±n SVG Kar≈üƒ±lƒ±klarƒ±
        const Trash2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
        );

        const Undo2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 14 4 9l5-5" /><path d="M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11" /></svg>
        );

        const RotateCcw = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /></svg>
        );

        const GRID_SIZE = 10;
        const INITIAL_PLAYER_POS = { x: 0, y: 9 };
        const GOAL_POS = { x: 6, y: 3 };

        // √ñzel SVG Bile≈üenleri
        const BasketballIcon = ({ size = 28 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10" fill="#f97316" stroke="#c2410c" />
                <path d="M12 2a14.5 14.5 0 0 0 0 20" stroke="#c2410c" />
                <path d="M2 12a14.5 14.5 0 0 0 20 0" stroke="#c2410c" />
                <path d="M4.5 4.5c4.5 4.5 4.5 10.5 0 15" stroke="#c2410c" />
                <path d="M19.5 4.5c-4.5 4.5-4.5 10.5 0 15" stroke="#c2410c" />
            </svg>
        );

        const INITIAL_MAP = [
            ['X', 'X', 'X', '', '', 'X', '', '', 'X', ''],
            ['X', 'X', '', 'X', 'X', '', 'X', '', 'X', ''],
            ['X', 'X', 'X', '', 'X', 'X', 'X', 'X', '', 'X'],
            ['X', '', '', '', '', '', 'goal', 'X', 'X', ''],
            ['X', '', '', '', 'O', 'X', 'X', 'X', '', 'X'],
            ['X', '', '', '', '', 'X', 'X', 'X', '', 'X'],
            ['X', '', 'X', 'X', 'O', 'X', 'X', 'X', '', 'X'],
            ['X', 'X', '', '', '', '', 'X', 'X', 'X', ''],
            ['O', 'O', 'O', '', '', 'X', 'X', '', '', 'X'],
            ['player', '', '', '', '', 'X', 'X', '', 'X', ''],
        ];

        const DIRECTIONS = [
            { name: 'Yukarƒ±', dx: 0, dy: -1 },
            { name: 'Saƒü', dx: 1, dy: 0 },
            { name: 'A≈üaƒüƒ±', dx: 0, dy: 1 },
            { name: 'Sol', dx: -1, dy: 0 },
        ];

        const COMMAND_TYPES = {
            MOVE_4: { label: '4 Adƒ±m Git', color: 'bg-orange-400', hover: 'hover:bg-orange-500', text: 'text-slate-900' },
            MOVE_2: { label: '2 Adƒ±m Git', color: 'bg-orange-400', hover: 'hover:bg-orange-500', text: 'text-slate-900' },
            TURN_RIGHT: { label: 'Saƒüa D√∂n', color: 'bg-sky-500', hover: 'hover:bg-sky-600', text: 'text-white' },
            TURN_LEFT: { label: 'Sola D√∂n', color: 'bg-green-500', hover: 'hover:bg-green-600', text: 'text-white' },
            JUMP: { label: 'Zƒ±pla', color: 'bg-yellow-400', hover: 'hover:bg-yellow-500', text: 'text-slate-900' },
        };

        const App = () => {
            const [commands, setCommands] = useState([]);

            const { playerPos, playerRotation, gameState, message } = useMemo(() => {
                let pos = { ...INITIAL_PLAYER_POS };
                let rotation = 0; // 0 = Yukarƒ± bakar
                let state = 'playing';
                let msg = '';

                for (let i = 0; i < commands.length; i++) {
                    const cmd = commands[i];

                    if (cmd === 'TURN_RIGHT') {
                        rotation += 90;
                    } else if (cmd === 'TURN_LEFT') {
                        rotation -= 90;
                    } else if (cmd.startsWith('MOVE') || cmd === 'JUMP') {
                        // Y√ºr√ºme adƒ±mlarƒ±nƒ± belirle
                        const steps = cmd === 'MOVE_4' ? 4 : 2;

                        let dirIndex = (Math.floor(rotation / 90) % 4);
                        if (dirIndex < 0) dirIndex += 4;
                        const d = DIRECTIONS[dirIndex];

                        let targetX = pos.x + (d.dx * steps);
                        let targetY = pos.y + (d.dy * steps);

                        // Harita dƒ±≈üƒ±na √ßƒ±kma kontrol√º
                        if (targetX < 0 || targetX >= GRID_SIZE || targetY < 0 || targetY >= GRID_SIZE) {
                            state = 'lost';
                            msg = 'Haritanƒ±n dƒ±≈üƒ±na √ßƒ±ktƒ±n!';
                            break;
                        }

                        // Adƒ±m atarak y√ºr√ºme kontrol√º (Zƒ±plama hari√ß)
                        if (cmd.startsWith('MOVE')) {
                            let collision = false;
                            // Yol √ºzerindeki t√ºm kareleri tek tek kontrol et
                            for (let s = 1; s <= steps; s++) {
                                let checkX = pos.x + d.dx * s;
                                let checkY = pos.y + d.dy * s;
                                if (INITIAL_MAP[checkY][checkX] === 'X') {
                                    collision = true;
                                    break;
                                }
                            }
                            if (collision) {
                                state = 'lost';
                                msg = 'Engele √ßarptƒ±n! √úzerinden ge√ßmek i√ßin Zƒ±pla komutunu kullanabilir veya ba≈üka yol deneyebilirsin.';
                                break;
                            }
                        }

                        pos = { x: targetX, y: targetY };

                        // Hedeflenen son karede engel var mƒ± kontrol√º (Zƒ±plama da d√º≈üebilir)
                        const cell = INITIAL_MAP[pos.y][pos.x];
                        if (cell === 'X') {
                            state = 'lost';
                            msg = 'Engelin tam √ºzerine d√º≈üt√ºn! Daha farklƒ± bir yol denemelisin.';
                            break;
                        }

                        // Kazandƒ± mƒ± kontrol√º
                        if (pos.x === GOAL_POS.x && pos.y === GOAL_POS.y) {
                            state = 'won';
                            msg = 'Harika! Doƒüru yolu bulup hedefe ula≈ütƒ±n!';
                            break;
                        }
                    }
                }
                return { playerPos: pos, playerRotation: rotation, gameState: state, message: msg };
            }, [commands]);

            const addCommand = (type) => {
                if (gameState !== 'playing') return;
                setCommands([...commands, type]);
            };

            const removeCommand = (index) => {
                const newCommands = [...commands];
                newCommands.splice(index, 1);
                setCommands(newCommands);
            };

            const clearCommands = () => {
                setCommands([]);
            };

            return (
                <div className="h-screen bg-slate-100 flex items-center justify-center p-2 font-sans overflow-hidden">
                    <div className="bg-white p-4 rounded-xl shadow-lg w-full max-w-6xl border border-slate-200 flex flex-col h-full max-h-[95vh]">

                        {/* Header */}
                        <div className="flex justify-between items-center mb-3">
                            <h1 className="text-2xl font-black text-red-600 uppercase tracking-tight">Hata Ayƒ±klama - Ayƒ±kla Pirincin Ta≈üƒ±nƒ±</h1>
                            <div className="bg-purple-50 text-purple-600 px-3 py-1 rounded-full text-sm font-bold border border-purple-200">SEVƒ∞YE 1</div>
                        </div>

                        <div className="flex flex-1 gap-4 overflow-hidden">

                            {/* Oyun Tahtasƒ± */}
                            <div className="flex-1 flex items-center justify-center bg-slate-50 rounded-lg border border-slate-200 p-2 shadow-inner">
                                <div className="relative grid grid-cols-10 border-4 border-slate-900 bg-white aspect-square w-full max-w-[500px]">

                                    {/* Hareketli Kukla (K√∂pek Emojisi) */}
                                    <div
                                        className="absolute z-30 flex items-center justify-center transition-all duration-500 ease-in-out"
                                        style={{
                                            left: `${playerPos.x * 10}%`,
                                            top: `${playerPos.y * 10}%`,
                                            width: '10%',
                                            height: '10%'
                                        }}
                                    >
                                        <div
                                            className="bg-white rounded-full shadow-lg border-2 border-sky-400 flex items-center justify-center transform transition-transform duration-500"
                                            style={{ width: '85%', height: '85%', transform: `rotate(${playerRotation}deg)` }}
                                        >
                                            <span className="text-2xl leading-none">üê∂</span>
                                        </div>
                                    </div>

                                    {INITIAL_MAP.map((row, y) =>
                                        row.map((cell, x) => (
                                            <div
                                                key={`${x}-${y}`}
                                                className={`border-[0.5px] border-slate-100 flex items-center justify-center relative
                                                ${(x + y) % 2 === 0 ? 'bg-white' : 'bg-slate-50'}`}
                                            >
                                                {cell === 'X' && <span className="text-red-500 font-bold text-lg">X</span>}
                                                {cell === 'O' && <span className="text-orange-400 font-bold text-lg opacity-60">O</span>}
                                                {x === GOAL_POS.x && y === GOAL_POS.y && <BasketballIcon />}
                                            </div>
                                        ))
                                    )}

                                    {/* Durum Katmanƒ± */}
                                    {gameState !== 'playing' && (
                                        <div className="absolute inset-0 z-40 flex items-center justify-center bg-slate-900/40 backdrop-blur-[2px]">
                                            <div className="bg-white p-6 rounded-xl shadow-2xl text-center border-2 border-slate-800">
                                                <h2 className={`text-xl font-black mb-2 ${gameState === 'won' ? 'text-green-600' : 'text-red-600'}`}>
                                                    {gameState === 'won' ? 'HARƒ∞KA!' : 'HATA!'}
                                                </h2>
                                                <p className="text-slate-600 text-sm font-bold mb-4">{message}</p>
                                                <div className="flex gap-2 justify-center">
                                                    {gameState === 'lost' && commands.length > 0 && (
                                                        <button onClick={() => removeCommand(commands.length - 1)} className="bg-slate-200 text-slate-700 px-4 py-2 rounded-lg font-bold hover:bg-slate-300 shadow-md">GERƒ∞ AL</button>
                                                    )}
                                                    <button onClick={clearCommands} className="bg-sky-500 text-white px-6 py-2 rounded-lg font-black hover:bg-sky-600 shadow-md">BA≈ûA D√ñN</button>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Saƒü Panel */}
                            <div className="w-80 flex flex-col gap-3">

                                {/* Komut Butonlarƒ± */}
                                <div className="grid grid-cols-2 gap-2">
                                    {Object.entries(COMMAND_TYPES).map(([key, config]) => (
                                        <button
                                            key={key}
                                            onClick={() => addCommand(key)}
                                            disabled={gameState !== 'playing'}
                                            className={`${config.color} ${config.hover} ${config.text} py-3 px-2 rounded-lg text-sm font-black shadow-md transition-all active:scale-95 disabled:opacity-40 uppercase`}
                                        >
                                            {config.label}
                                        </button>
                                    ))}
                                </div>

                                {/* Algoritma Listesi */}
                                <div className="flex-1 flex flex-col bg-white border-2 border-slate-200 rounded-xl overflow-hidden shadow-sm">
                                    <div className="bg-slate-100 p-2 font-black text-xs text-center text-slate-500 border-b tracking-widest uppercase">
                                        ALGORƒ∞TMAM
                                    </div>
                                    <div className="flex-1 overflow-y-auto p-2 space-y-1.5 scrollbar-hide">
                                        {commands.length === 0 ? (
                                            <div className="text-slate-300 text-center mt-10 text-xs font-bold uppercase italic">Komut Ekle</div>
                                        ) : (
                                            commands.map((cmd, idx) => (
                                                <div key={idx} className={`flex items-center justify-between p-2 rounded-md font-bold text-xs shadow transition-all ${COMMAND_TYPES[cmd].color} ${COMMAND_TYPES[cmd].text}`}>
                                                    <div className="flex items-center gap-2">
                                                        <span className="bg-black/10 rounded w-4 h-4 flex items-center justify-center text-[10px]">{idx + 1}</span>
                                                        {COMMAND_TYPES[cmd].label}
                                                    </div>
                                                    <button onClick={() => removeCommand(idx)} className="hover:opacity-50 transition-opacity"><Trash2 size={12} /></button>
                                                </div>
                                            ))
                                        )}
                                    </div>
                                    <div className="p-2 border-t flex justify-between items-center text-slate-500 font-bold text-xs bg-slate-50">
                                        <span className="bg-slate-200 px-2 py-1 rounded-md">{commands.length} ADIM</span>
                                        <div className="flex gap-2">
                                            <button onClick={() => { if (commands.length > 0) removeCommand(commands.length - 1) }} className="p-2 bg-slate-400 text-white rounded-md hover:bg-slate-500 shadow-sm transition-all flex items-center gap-1" title="Son Adƒ±mƒ± Sil">
                                                <Undo2 size={14} />
                                            </button>
                                            <button onClick={clearCommands} className="p-2 bg-red-500 text-white rounded-md hover:bg-red-600 shadow-sm transition-all flex items-center gap-1" title="T√ºm√ºn√º Temizle">
                                                <RotateCcw size={14} />
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>